"""
ì „ì²˜ë¦¬ ë° ëª¨ë¸ë§ ê°œì„  ìµœì¢… ë³´ê³ ì„œ

ë‚ ì§œ: 2025-12-16
ëª©í‘œ: EDA Phase 4 ì¸ì‚¬ì´íŠ¸ë¥¼ ë°”íƒ•ìœ¼ë¡œ preprocessing ê°œì„  ë° ëª¨ë¸ ì„±ëŠ¥ í–¥ìƒ
"""

# ============================================================================
# 1. EDA Phase 4 í•µì‹¬ ì¸ì‚¬ì´íŠ¸
# ============================================================================

"""
ì£¼ìš” ë°œê²¬:
1. ìœ„ì¹˜ë³„ ì˜ˆì¸¡ ë‚œì´ë„ ì°¨ì´
   - ê³µê²©ì§„: 13.28m (ì‰¬ì›€)
   - ì¤‘ì›: 22.39m
   - ìˆ˜ë¹„ì§„: 26.41m (ì–´ë ¤ì›€)

2. ê³¨ë¬¸ ê±°ë¦¬ê°€ ìµœê°• ì˜ˆì¸¡ ë³€ìˆ˜ (ìƒê´€ -0.966)

3. ë‹¤ì¤‘ê³µì„ ì„± ë¬¸ì œ (39ê°œ ìŒ |r|>0.8)
   - start_x_norm, start_y_norm ë“± ì œê±° í•„ìš”

4. ë¹„ì„ í˜• íŒ¨í„´ ì¡´ì¬
   - ë¹ ë¥¸ ì†ë„ Ã— ê¸´ ê±°ë¦¬ = ë†’ì€ ì •í™•ë„

5. Yì¶• ì¤‘ì•™ì´ ê°€ì¥ ì˜ˆì¸¡ ì–´ë ¤ì›€ (25.93m)
"""

# ============================================================================
# 2. ì „ì²˜ë¦¬ ê°œì„  ì‚¬í•­ (preprocessing_v2.py)
# ============================================================================

"""
âœ… êµ¬í˜„ ì™„ë£Œ:

A. ë‹¤ì¤‘ê³µì„ ì„± ì œê±° (5ê°œ í”¼ì²˜)
   - start_x_norm, start_y_norm
   - end_x_norm, end_y_norm  
   - start_x_zone_fine
   
B. ë¹„ì„ í˜• ë³€í™˜ ì¶”ê°€ (8ê°œ í”¼ì²˜)
   - distance_to_goal_inv: 1/(distance+1)
   - distance_to_goal_sqrt: sqrt(distance)
   - shooting_angle_sin/cos: ê°ë„ì˜ ì‚¼ê°í•¨ìˆ˜
   - start_x_squared, start_y_squared: ìœ„ì¹˜ ì œê³±
   - x_y_interaction: start_x * start_y
   - goal_dist_angle_interaction: ê³¨ê±°ë¦¬ * ê°ë„
   
C. ìœ„ì¹˜ë³„ íŠ¹í™” í”¼ì²˜ (6ê°œ)
   - is_defensive_third: ìˆ˜ë¹„ì§„ í”Œë˜ê·¸
   - goal_urgency: exp(-dist/20)
   - is_central_corridor: Yì¶• ì¤‘ì•™
   - near_goal_zone: ê³¨ ê·¼ì²˜
   - is_wing_attack: ì‚¬ì´ë“œ ê³µê²©
   - is_midfield_control: ì¤‘ì› ì§€ë°°
   
D. ì»¨í…ìŠ¤íŠ¸ í”¼ì²˜ (9ê°œ)
   - player_avg_x/y: ì„ ìˆ˜ í‰ê·  ìœ„ì¹˜
   - player_avg_pass_dist/velocity: ì„ ìˆ˜ ìŠ¤íƒ€ì¼
   - team_aggression/avg_episode_length/avg_tempo: íŒ€ ì „ìˆ 
   - time_pressure: ê²½ê¸° ì¢…ë£Œ ì„ë°•
   - player_position_deviation: ì„ ìˆ˜ ìœ„ì¹˜ ì´íƒˆë„
   
E. ê²°ì¸¡ì¹˜ ì²˜ë¦¬ ê°œì„ 
   - ì—í”¼ì†Œë“œ í‰ê· ìœ¼ë¡œ ëŒ€ì²´ (ê¸°ì¡´: 0ìœ¼ë¡œ ì±„ì›€)
   - is_first_event í”Œë˜ê·¸ ì¶”ê°€
"""

# ============================================================================
# 3. ëª¨ë¸ ì„±ëŠ¥ ë¹„êµ
# ============================================================================

"""
ëª¨ë¸ ë²„ì „ë³„ ì„±ëŠ¥:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë²„ì „    â”‚ í”¼ì²˜ ê°œìˆ˜    â”‚ Val í‰ê·     â”‚ ë¹„ê³              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ V1      â”‚ 54ê°œ         â”‚ 0.93m       â”‚ ê¸°ì¡´ (ìµœê³ )      â”‚
â”‚ V2      â”‚ 75ê°œ         â”‚ 1.06m       â”‚ ê³¼í”¼íŒ… âš ï¸        â”‚
â”‚ V2.1    â”‚ 40ê°œ         â”‚ 0.9983m     â”‚ Feature Select   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ê²°ë¡ :
- V2ì—ì„œ ëª¨ë“  ìƒˆ í”¼ì²˜ë¥¼ ì¶”ê°€í–ˆì§€ë§Œ ì˜¤íˆë ¤ ì„±ëŠ¥ ì €í•˜ (-14%)
- Feature Selectionìœ¼ë¡œ ê°œì„  (V2: 1.06m â†’ V2.1: 0.998m)
- í•˜ì§€ë§Œ ì—¬ì „íˆ V1(0.93m)ë³´ë‹¤ ì•½ê°„ ë‚®ìŒ
"""

# ============================================================================
# 4. ì›ì¸ ë¶„ì„
# ============================================================================

"""
ì™œ V2ê°€ V1ë³´ë‹¤ ë‚˜ë¹ ì¡ŒëŠ”ê°€?

1. ê³¼ì í•© (Overfitting)
   - 75ê°œ í”¼ì²˜ëŠ” ë„ˆë¬´ ë§ìŒ
   - ë…¸ì´ì¦ˆ í”¼ì²˜ê°€ í¬í•¨ë¨
   
2. í”¼ì²˜ ê°„ ìƒí˜¸ì‘ìš©ì´ ì—­íš¨ê³¼
   - ì¼ë¶€ ìƒí˜¸ì‘ìš© í”¼ì²˜ê°€ ì˜¤íˆë ¤ í˜¼ë€ ì´ˆë˜
   
3. ì»¨í…ìŠ¤íŠ¸ í”¼ì²˜ì˜ Data Leakage ê°€ëŠ¥ì„±
   - player_stats, team_statsê°€ ì „ì²´ ë°ì´í„°ë¡œ ê³„ì‚°ë¨
   - ë§ˆì§€ë§‰ ì´ë²¤íŠ¸ ì¶”ì¶œ ì „ì— ê³„ì‚°ë˜ì–´ future info í¬í•¨ ê°€ëŠ¥
   
4. í•˜ì´í¼íŒŒë¼ë¯¸í„° ë¯¸ì¡°ì •
   - V1 í•˜ì´í¼íŒŒë¼ë¯¸í„°ë¡œ V2 í•™ìŠµ â†’ ìµœì í™” ì•ˆë¨
"""

# ============================================================================
# 5. Feature Importance ë¶„ì„
# ============================================================================

"""
V2.1ì—ì„œ ì¤‘ìš”í•œ í”¼ì²˜ Top 10:

1. delta_x (9060): ì´ë™ ê±°ë¦¬ X
2. distance_to_goal_end (5942): ë„ì°© í›„ ê³¨ë¬¸ ê±°ë¦¬ â­
3. start_x (4866): ì‹œì‘ ìœ„ì¹˜ X
4. distance (4681): ì´ ì´ë™ ê±°ë¦¬
5. delta_y (4568): ì´ë™ ê±°ë¦¬ Y
6. goal_approach (4504): ê³¨ ì ‘ê·¼ë„
7. goal_dist_angle_interaction (3913): ğŸ”¥ NEW ìƒí˜¸ì‘ìš© í”¼ì²˜
8. x_total_progression (2463): ì—í”¼ì†Œë“œ ì „ì²´ X ì§„í–‰
9. start_y (2446): ì‹œì‘ ìœ„ì¹˜ Y
10. forward_momentum (2280): ì „ì§„ ëª¨ë©˜í…€

âœ… ìƒˆ í”¼ì²˜ ì¤‘ ìœ ì˜ë¯¸:
   - goal_dist_angle_interaction (7ìœ„)
   - time_pressure (14ìœ„)
   - player_position_deviation (15ìœ„)
   
âš ï¸  íš¨ê³¼ ë¯¸ë¯¸í•œ ìƒˆ í”¼ì²˜:
   - is_defensive_third, is_central_corridor ë“± (í•˜ìœ„ê¶Œ)
   - team í†µê³„ (ê±°ì˜ ì˜í–¥ ì—†ìŒ)
"""

# ============================================================================
# 6. ìµœì¢… ê¶Œì¥ì‚¬í•­
# ============================================================================

"""
A. ë‹¨ê¸° ê°œì„  (ì¦‰ì‹œ ì ìš© ê°€ëŠ¥):
   
   1. V1 ìœ ì§€ + í•µì‹¬ ì‹ ê·œ í”¼ì²˜ë§Œ ì¶”ê°€
      - distance_to_goal_inv
      - shooting_angle_sin/cos
      - goal_dist_angle_interaction
      - time_pressure
      
   2. Ensembleì—ì„œ V1ì„ ê¸°ë³¸ìœ¼ë¡œ, V2.1ì„ ë³´ì¡°ë¡œ ì‚¬ìš©
      - V1: 0.6~0.7 ê°€ì¤‘ì¹˜
      - V2.1: 0.3~0.4 ê°€ì¤‘ì¹˜
      
B. ì¤‘ê¸° ê°œì„ :
   
   1. ìœ„ì¹˜ë³„ ê°œë³„ ëª¨ë¸
      - ìˆ˜ë¹„ì§„/ì¤‘ì›/ê³µê²©ì§„ ê°ê° ë³„ë„ ëª¨ë¸
      - ì˜ˆì¸¡ ë‚œì´ë„ê°€ ë‹¤ë¥´ë¯€ë¡œ íŠ¹í™” ëª¨ë¸ íš¨ê³¼ì 
      
   2. Stacking
      - 1ë‹¨ê³„: ì—¬ëŸ¬ ëª¨ë¸ ì˜ˆì¸¡
      - 2ë‹¨ê³„: ì˜ˆì¸¡ê°’ì„ í”¼ì²˜ë¡œ í™œìš©
      
   3. ë¹„ì„ í˜• ëª¨ë¸ ì¶”ê°€
      - Neural Network (MLP)
      - LSTM (ì‹œí€€ìŠ¤ í™œìš©)
      
C. ì¥ê¸° ê°œì„ :
   
   1. ì™¸ë¶€ ë°ì´í„° í™œìš©
      - ì„ ìˆ˜ í¬ì§€ì…˜ ì •ë³´
      - ê²½ê¸° ìƒí™© (ì ìˆ˜ ì°¨)
      - ë‚ ì”¨, ê²½ê¸°ì¥ íŠ¹ì„±
      
   2. ë„ë©”ì¸ ì§€ì‹ ê°•í™”
      - ì¶•êµ¬ ì „ë¬¸ê°€ì™€ í˜‘ì—…
      - ì „ìˆ  íŒ¨í„´ ì‹¬í™” ë¶„ì„
"""

# ============================================================================
# 7. ë‹¤ìŒ ë‹¨ê³„ ì•¡ì…˜ í”Œëœ
# ============================================================================

"""
Priority 1: V1 + í•µì‹¬ ì‹ ê·œ í”¼ì²˜ (preprocessing_v3.py)
   - V1 ë² ì´ìŠ¤
   - 4ê°œ ì‹ ê·œ í”¼ì²˜ë§Œ ì¶”ê°€
   - ëª©í‘œ: < 0.90m
   
Priority 2: ìœ„ì¹˜ë³„ ëª¨ë¸
   - 3ê°œ êµ¬ê°„ìœ¼ë¡œ ë¶„í• 
   - ê°ê° ìµœì í™”
   
Priority 3: Ensemble ê°€ì¤‘ì¹˜ ì¬ì¡°ì •
   - V1 + V2.1 + V3 ì¡°í•©
   - Grid Searchë¡œ ìµœì  ê°€ì¤‘ì¹˜ íƒìƒ‰
"""

# ============================================================================
# 8. í•™ìŠµ ë‚´ìš© ë° ì¸ì‚¬ì´íŠ¸
# ============================================================================

"""
ğŸ“ ë°°ìš´ ì :

1. "ë” ë§ì€ í”¼ì²˜ = ë” ì¢‹ì€ ì„±ëŠ¥"ì´ ì•„ë‹˜
   - Feature Engineeringì€ ì–‘ë³´ë‹¤ ì§ˆ
   - ë…¸ì´ì¦ˆ í”¼ì²˜ëŠ” ì˜¤íˆë ¤ í•´ë¡œì›€
   
2. EDA ì¸ì‚¬ì´íŠ¸ê°€ í•­ìƒ ëª¨ë¸ ê°œì„ ìœ¼ë¡œ ì´ì–´ì§€ì§€ ì•ŠìŒ
   - í†µê³„ì  ìƒê´€ê´€ê³„ â‰  ì˜ˆì¸¡ë ¥
   - ì‹¤ì œ í•™ìŠµìœ¼ë¡œ ê²€ì¦ í•„ìš”
   
3. ë‹¨ê³„ì  ê°œì„ ì˜ ì¤‘ìš”ì„±
   - í•œ ë²ˆì— ëª¨ë“  ê²ƒì„ ë°”ê¾¸ë©´ ë””ë²„ê¹… ì–´ë ¤ì›€
   - ì‘ì€ ë³€í™” â†’ ê²€ì¦ â†’ ë‹¤ìŒ ë‹¨ê³„
   
4. ë² ì´ìŠ¤ë¼ì¸ì˜ ê°•ë ¥í•¨
   - V1ì´ ì´ë¯¸ ë§¤ìš° ì¢‹ì€ ì„±ëŠ¥ (0.93m)
   - ë² ì´ìŠ¤ë¼ì¸ ëŒ€ë¹„ 20.37m â†’ 0.93m (95.4% ê°œì„ )
   - ì¶”ê°€ ê°œì„ ì€ ì–´ë ¤ì›€ (diminishing returns)
   
5. Data Leakage ì£¼ì˜
   - ì „ì²´ ë°ì´í„°ë¡œ í†µê³„ ê³„ì‚° ì‹œ ì¡°ì‹¬
   - Train/Val ë¶„ë¦¬ ì „ì— ê³„ì‚°í•˜ë©´ leakage ë°œìƒ
"""

# ============================================================================
# 9. ê²°ë¡ 
# ============================================================================

"""
âœ… ì„±ê³¼:
   - EDA Phase 4 ì™„ë£Œ: 245ê°œ ì¸ì‚¬ì´íŠ¸
   - preprocessing_v2.py ê°œë°œ: 75ê°œ í”¼ì²˜
   - 23ê°œ ì‹ ê·œ í”¼ì²˜ ì¶”ê°€ (ë¹„ì„ í˜•, ìœ„ì¹˜íŠ¹í™”, ì»¨í…ìŠ¤íŠ¸)
   - Feature Selection ë°©ë²•ë¡  í™•ë¦½
   
âš ï¸  í•œê³„:
   - V1 ëŒ€ë¹„ ì„±ëŠ¥ ë¯¸ê°œì„  (0.93m ìœ ì§€)
   - ì¼ë¶€ ì‹ ê·œ í”¼ì²˜ê°€ íš¨ê³¼ ì—†ìŒ
   
ğŸ“ˆ í–¥í›„ ë°©í–¥:
   - V1 ë² ì´ìŠ¤ + ì„ ë³„ì  ì‹ ê·œ í”¼ì²˜ (V3)
   - ìœ„ì¹˜ë³„ ëª¨ë¸
   - Ensemble ìµœì í™”
   
ğŸ’¡ ìµœì¢… ì œì•ˆ:
   í˜„ì¬ V1 ëª¨ë¸(0.93m)ì„ ìœ ì§€í•˜ë©´ì„œ,
   Ensembleì—ì„œ V2.1ì„ ë³´ì¡°ë¡œ í™œìš©í•˜ëŠ” ê²ƒì´ ìµœì„ 
"""

print(__doc__)

