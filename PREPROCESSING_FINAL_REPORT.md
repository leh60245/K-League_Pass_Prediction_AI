# ì „ì²˜ë¦¬ ê°œì„  í”„ë¡œì íŠ¸ ìµœì¢… ë³´ê³ ì„œ

**ë‚ ì§œ**: 2025-12-16  
**ëª©í‘œ**: EDA Phase 4 ì¸ì‚¬ì´íŠ¸ ê¸°ë°˜ preprocessing ê°œì„  ë° ëª¨ë¸ ì„±ëŠ¥ í–¥ìƒ  
**ìƒíƒœ**: âœ… ì™„ë£Œ

---

## ğŸ“Š Executive Summary

### ìˆ˜í–‰ ì‘ì—…
1. âœ… **EDA Phase 4 ì™„ë£Œ** - í”¼ì²˜ íš¨ê³¼ì„± ë¶„ì„ (245ê°œ ì¸ì‚¬ì´íŠ¸)
2. âœ… **preprocessing_v2.py ê°œë°œ** - 23ê°œ ì‹ ê·œ í”¼ì²˜ ì¶”ê°€
3. âœ… **ëª¨ë¸ í•™ìŠµ ë° í‰ê°€** - V1, V2, V2.1 ë¹„êµ
4. âœ… **Feature Selection ìˆ˜í–‰** - 75ê°œ â†’ 40ê°œ í”¼ì²˜ ì„ ë³„

### ìµœì¢… ê²°ê³¼
| ë²„ì „ | í”¼ì²˜ ìˆ˜ | Validation ì„±ëŠ¥ | ë¹„ê³  |
|------|---------|----------------|------|
| **V1 (ê¸°ì¡´)** | 54ê°œ | **0.93m** â­ | ìµœê³  ì„±ëŠ¥ |
| V2 (ì „ì²´) | 75ê°œ | 1.06m âŒ | ê³¼ì í•© |
| V2.1 (ì„ ë³„) | 40ê°œ | 0.998m âš ï¸ | ê°œì„ ë˜ì—ˆìœ¼ë‚˜ V1 ë¯¸ë§Œ |

**ê²°ë¡ **: V1ì´ ì—¬ì „íˆ ìµœê³  ì„±ëŠ¥. V2 ì‹ ê·œ í”¼ì²˜ ì¤‘ ì¼ë¶€ë§Œ íš¨ê³¼ì .

---

## ğŸ¯ EDA Phase 4 í•µì‹¬ ì¸ì‚¬ì´íŠ¸

### 1. ìœ„ì¹˜ë³„ ì˜ˆì¸¡ ë‚œì´ë„
```
ê³µê²©ì§„ (70-105m):  13.28m âœ… (ì‰¬ì›€)
ì¤‘ì› (35-70m):     22.39m âš ï¸
ìˆ˜ë¹„ì§„ (0-35m):    26.41m âŒ (ì–´ë ¤ì›€)
```

### 2. ìµœê°• ì˜ˆì¸¡ ë³€ìˆ˜
- `distance_to_goal_end`: ìƒê´€ê³„ìˆ˜ **-0.966** (end_x)
- `start_y`: ìƒê´€ê³„ìˆ˜ **0.794** (end_y)

### 3. ë‹¤ì¤‘ê³µì„ ì„± ë¬¸ì œ
- 39ê°œ í”¼ì²˜ ìŒì´ |r| > 0.8
- ì œê±° ëŒ€ìƒ: `start_x_norm`, `start_y_norm`, `start_x_zone_fine` ë“±

### 4. Yì¶• ì¤‘ì•™ì´ ê°€ì¥ ì–´ë ¤ì›€
- ì¤‘ì•™ (22.67-45.33m): 25.93m
- ì¢Œ/ìš°ì¸¡: 17-19m

### 5. ì†ë„ í”¼ì²˜ ê²°ì¸¡ì¹˜
- velocity: 11.3% ê²°ì¸¡
- acceleration: 20.0% ê²°ì¸¡

---

## ğŸ”§ preprocessing_v2.py ê°œì„  ì‚¬í•­

### A. ë‹¤ì¤‘ê³µì„ ì„± ì œê±° (5ê°œ)
```python
ì œê±° í”¼ì²˜:
- start_x_norm, start_y_norm  # ì›ë³¸ê³¼ ì™„ì „ ì¤‘ë³µ
- end_x_norm, end_y_norm      # íƒ€ê²Ÿ íŒŒìƒ
- start_x_zone_fine           # start_xì™€ 0.972 ìƒê´€
```

### B. ë¹„ì„ í˜• ë³€í™˜ ì¶”ê°€ (8ê°œ)
```python
ì‹ ê·œ í”¼ì²˜:
âœ… distance_to_goal_inv = 1 / (distance_to_goal_start + 1)
âœ… distance_to_goal_sqrt = sqrt(distance_to_goal_start)
âœ… shooting_angle_sin/cos = sin/cos(shooting_angle)
âœ… start_x_squared, start_y_squared
âœ… x_y_interaction = start_x * start_y
âœ… goal_dist_angle_interaction = distance * angle
```

### C. ìœ„ì¹˜ë³„ íŠ¹í™” í”¼ì²˜ (6ê°œ)
```python
âœ… is_defensive_third: ìˆ˜ë¹„ì§„ í”Œë˜ê·¸
âœ… goal_urgency: exp(-distance/20)
âœ… is_central_corridor: Yì¶• ì¤‘ì•™ êµ¬ê°„
âœ… near_goal_zone: ê³¨ ê·¼ì²˜ í”Œë˜ê·¸
âœ… is_wing_attack: ì‚¬ì´ë“œ ê³µê²©
âœ… is_midfield_control: ì¤‘ì› ì§€ë°°
```

### D. ì»¨í…ìŠ¤íŠ¸ í”¼ì²˜ (9ê°œ)
```python
âœ… player_avg_x/y: ì„ ìˆ˜ í‰ê·  í™œë™ ìœ„ì¹˜
âœ… player_avg_pass_dist: ì„ ìˆ˜ í‰ê·  íŒ¨ìŠ¤ ê±°ë¦¬
âœ… player_avg_velocity: ì„ ìˆ˜ í‰ê·  ì†ë„
âœ… team_aggression: íŒ€ ê³µê²©ì„±
âœ… team_avg_episode_length: íŒ€ í‰ê·  ì—í”¼ì†Œë“œ ê¸¸ì´
âœ… team_avg_tempo: íŒ€ í‰ê·  í…œí¬
âœ… time_pressure: ê²½ê¸° ì¢…ë£Œ ì„ë°• ì••ë°•
âœ… player_position_deviation: í‰ì†Œ ìœ„ì¹˜ ì´íƒˆë„
```

### E. ê²°ì¸¡ì¹˜ ì²˜ë¦¬ ê°œì„ 
```python
ê¸°ì¡´: 0ìœ¼ë¡œ ì±„ìš°ê¸°
ê°œì„ : ì—í”¼ì†Œë“œ í‰ê· ìœ¼ë¡œ ëŒ€ì²´ â†’ 0ìœ¼ë¡œ ë°±ì—…

+ is_first_event í”Œë˜ê·¸ ì¶”ê°€
```

---

## ğŸ“ˆ ëª¨ë¸ ì„±ëŠ¥ ë¶„ì„

### V2 ì„±ëŠ¥ ì €í•˜ ì›ì¸
1. **ê³¼ì í•©**: 75ê°œ í”¼ì²˜ëŠ” ë„ˆë¬´ ë§ìŒ
2. **ë…¸ì´ì¦ˆ í”¼ì²˜**: ì¼ë¶€ ì‹ ê·œ í”¼ì²˜ê°€ ì—­íš¨ê³¼
3. **í•˜ì´í¼íŒŒë¼ë¯¸í„° ë¯¸ì¡°ì •**: V1 ì„¤ì •ìœ¼ë¡œ V2 í•™ìŠµ
4. **Data Leakage ê°€ëŠ¥ì„±**: ì „ì²´ ë°ì´í„°ë¡œ í†µê³„ ê³„ì‚°

### Feature Importance ë¶„ì„ (V2.1)

**Top 10 ì¤‘ìš” í”¼ì²˜:**
```
1. delta_x (9060) - ì´ë™ ê±°ë¦¬ X
2. distance_to_goal_end (5942) - ë„ì°© í›„ ê³¨ë¬¸ ê±°ë¦¬
3. start_x (4866) - ì‹œì‘ ìœ„ì¹˜ X
4. distance (4681) - ì´ ì´ë™ ê±°ë¦¬
5. delta_y (4568) - ì´ë™ ê±°ë¦¬ Y
6. goal_approach (4504) - ê³¨ ì ‘ê·¼ë„
7. goal_dist_angle_interaction (3913) â­ NEW
8. x_total_progression (2463) - ì—í”¼ì†Œë“œ X ì§„í–‰
9. start_y (2446) - ì‹œì‘ ìœ„ì¹˜ Y
10. forward_momentum (2280) - ì „ì§„ ëª¨ë©˜í…€
```

**íš¨ê³¼ì ì¸ ì‹ ê·œ í”¼ì²˜:**
- âœ… `goal_dist_angle_interaction` (7ìœ„)
- âœ… `time_pressure` (14ìœ„)
- âœ… `player_position_deviation` (15ìœ„)

**íš¨ê³¼ ë¯¸ë¯¸í•œ ì‹ ê·œ í”¼ì²˜:**
- âš ï¸ ìœ„ì¹˜ í”Œë˜ê·¸ë“¤ (is_defensive_third ë“±): í•˜ìœ„ê¶Œ
- âš ï¸ íŒ€ í†µê³„ë“¤: ê±°ì˜ ì˜í–¥ ì—†ìŒ

---

## ğŸ’¡ í•™ìŠµ ë‚´ìš©

### 1. ë” ë§ì€ í”¼ì²˜ â‰  ë” ì¢‹ì€ ì„±ëŠ¥
- Feature Engineeringì€ **ì–‘ë³´ë‹¤ ì§ˆ**
- ë…¸ì´ì¦ˆ í”¼ì²˜ëŠ” ì˜¤íˆë ¤ í•´ë¡œì›€

### 2. EDA ì¸ì‚¬ì´íŠ¸ â†’ ëª¨ë¸ ê°œì„  (í•­ìƒì€ ì•„ë‹˜)
- í†µê³„ì  ìƒê´€ê´€ê³„ â‰  ì˜ˆì¸¡ë ¥
- ì‹¤ì œ í•™ìŠµìœ¼ë¡œ ê²€ì¦ í•„ìˆ˜

### 3. ë‹¨ê³„ì  ê°œì„ ì˜ ì¤‘ìš”ì„±
- ì‘ì€ ë³€í™” â†’ ê²€ì¦ â†’ ë‹¤ìŒ ë‹¨ê³„
- í•œ ë²ˆì— ëª¨ë“  ê²ƒ ë°”ê¾¸ë©´ ë””ë²„ê¹… ì–´ë ¤ì›€

### 4. ë² ì´ìŠ¤ë¼ì¸ì˜ ê°•ë ¥í•¨
- V1ì´ ì´ë¯¸ ë§¤ìš° ìš°ìˆ˜ (20.37m â†’ 0.93m, **95.4% ê°œì„ **)
- ì¶”ê°€ ê°œì„ ì€ ì–´ë ¤ì›€ (diminishing returns)

### 5. Data Leakage ì£¼ì˜
- ì „ì²´ ë°ì´í„°ë¡œ í†µê³„ ê³„ì‚° ì‹œ ì¡°ì‹¬
- Train/Val ë¶„ë¦¬ ì „ ê³„ì‚° â†’ leakage ë°œìƒ

---

## ğŸš€ í–¥í›„ ê°œì„  ë°©í–¥

### Priority 1: V3 ê°œë°œ (V1 + í•µì‹¬ ì‹ ê·œ í”¼ì²˜ë§Œ)
```python
V1 ë² ì´ìŠ¤ + íš¨ê³¼ì ì¸ ì‹ ê·œ í”¼ì²˜ë§Œ:
âœ… distance_to_goal_inv
âœ… shooting_angle_sin/cos
âœ… goal_dist_angle_interaction
âœ… time_pressure

ëª©í‘œ: < 0.90m
```

### Priority 2: ìœ„ì¹˜ë³„ ëª¨ë¸
```python
ìˆ˜ë¹„ì§„/ì¤‘ì›/ê³µê²©ì§„ ë³„ë„ ëª¨ë¸ í•™ìŠµ
â†’ ì˜ˆì¸¡ ë‚œì´ë„ê°€ ë‹¤ë¥´ë¯€ë¡œ íŠ¹í™” íš¨ê³¼ì 
```

### Priority 3: Ensemble ìµœì í™”
```python
V1 (0.6) + V2.1 (0.2) + V3 (0.2)
â†’ Grid Searchë¡œ ìµœì  ê°€ì¤‘ì¹˜ íƒìƒ‰
```

### Priority 4: ê³ ê¸‰ ëª¨ë¸ë§
- Stacking: 1ë‹¨ê³„ ì˜ˆì¸¡ â†’ 2ë‹¨ê³„ í”¼ì²˜
- Neural Network (MLP)
- LSTM (ì‹œí€€ìŠ¤ í™œìš©)

---

## ğŸ“ ìƒì„±ëœ íŒŒì¼

### ë¶„ì„ íŒŒì¼
- `eda_phase4_feature_analysis.py` - EDA ìŠ¤í¬ë¦½íŠ¸
- `EDA_Phase4_í•µì‹¬ì¸ì‚¬ì´íŠ¸.md` - ìƒì„¸ ë¶„ì„ ë¦¬í¬íŠ¸
- `archive/EDA_Phase4_Feature_Analysis_20251216_160239.txt` - ì „ì²´ ë¡œê·¸

### ì „ì²˜ë¦¬ íŒŒì¼
- `preprocessing_v2.py` - ê°œì„ ëœ ì „ì²˜ë¦¬ (75ê°œ í”¼ì²˜)
- `processed_train_data_v2.csv` - ì „ì²˜ë¦¬ëœ ë°ì´í„°
- `preprocessor_v2.pkl` - ì „ì²˜ë¦¬ ê°ì²´

### ëª¨ë¸ í•™ìŠµ íŒŒì¼
- `train_lightgbm_v2.py` - V2 ëª¨ë¸ í•™ìŠµ
- `train_lightgbm_v2.1.py` - Feature Selection ì ìš©
- `lightgbm_model_v2.pkl` - í•™ìŠµëœ ëª¨ë¸

### ë³´ê³ ì„œ
- `preprocessing_improvement_report.py` - ê°œì„  ë³´ê³ ì„œ
- `PREPROCESSING_FINAL_REPORT.md` (ì´ íŒŒì¼)

---

## âœ… ê²°ë¡ 

### ì„±ê³¼
1. âœ… **EDA Phase 4 ì™„ë£Œ**: í”¼ì²˜ íš¨ê³¼ì„± ì‹¬ì¸µ ë¶„ì„
2. âœ… **23ê°œ ì‹ ê·œ í”¼ì²˜ ê°œë°œ**: ë¹„ì„ í˜•, ìœ„ì¹˜íŠ¹í™”, ì»¨í…ìŠ¤íŠ¸
3. âœ… **Feature Selection ë°©ë²•ë¡  í™•ë¦½**: 75ê°œ â†’ 40ê°œ
4. âœ… **í•™ìŠµ ê²½í—˜**: "ë” ë§ì€ í”¼ì²˜ â‰  ë” ë‚˜ì€ ì„±ëŠ¥" ì…ì¦

### í•œê³„
- âš ï¸ V1 ëŒ€ë¹„ ì„±ëŠ¥ ë¯¸ê°œì„  (0.93m ìœ ì§€)
- âš ï¸ ì¼ë¶€ ì‹ ê·œ í”¼ì²˜ íš¨ê³¼ ì—†ìŒ
- âš ï¸ Data Leakage ê°€ëŠ¥ì„± ë°œê²¬

### ìµœì¢… ê¶Œì¥ì‚¬í•­
**í˜„ì¬ V1 ëª¨ë¸(0.93m)ì„ ë² ì´ìŠ¤ë¡œ ìœ ì§€**í•˜ë©´ì„œ,  
íš¨ê³¼ì ì¸ ì‹ ê·œ í”¼ì²˜ 4-5ê°œë§Œ ì„ ë³„ ì¶”ê°€í•˜ì—¬ **V3 ê°œë°œ** ê¶Œì¥

ë˜ëŠ” Ensembleì—ì„œ V1(ì£¼) + V2.1(ë³´ì¡°) ì¡°í•©ìœ¼ë¡œ  
**ì•ˆì •ì„±ê³¼ ë‹¤ì–‘ì„±ì„ ë™ì‹œì— í™•ë³´**

---

**ì‘ì„±**: AI Feature Engineering System  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-12-16 16:30

